<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Mirror Timer</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            margin: 0;
            background-color: black;
            color: white;
            font-family: 'Noto Sans KR', sans-serif;
            height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: space-between;
            overflow: hidden;
            cursor: none; /* ê±°ìš¸ìš© ë§ˆìš°ìŠ¤ ìˆ¨ê¹€ */
        }

        /* í™ˆ ë²„íŠ¼ ìŠ¤íƒ€ì¼ (ìƒíƒœ í˜ì´ì§€ì™€ í†µì¼) */
        .home-link {
            position: absolute;
            top: 40px;
            left: 40px;
            text-decoration: none;
            font-size: 2.5rem;
            color: rgba(255, 255, 255, 0.4);
            background: rgba(255, 255, 255, 0.1);
            width: 70px;
            height: 70px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 15px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.2s;
            z-index: 100;
        }

        .home-link:active {
            transform: scale(0.9);
            background: rgba(255, 255, 255, 0.2);
            color: white;
        }

        #clock { font-size: 2rem; margin-top: 30px; color: #888; }
        #display { font-size: 9rem; font-weight: 700; margin: auto 0; transition: color 0.2s; }
        .flashing { animation: flash 0.5s infinite; }
        @keyframes flash { 0% { color: #FF4B2B; } 50% { color: black; } 100% { color: #FF4B2B; } }
        
        .adjust-container { display: flex; gap: 15px; margin-bottom: 20px; }
        .adj-btn { background-color: transparent; color: #FFD700; border: 2px solid #FFD700; padding: 15px 25px; font-size: 1.5rem; border-radius: 10px; font-weight: bold; }
        
        .control-container { display: flex; gap: 20px; margin-bottom: 60px; }
        .ctrl-btn { padding: 20px 40px; font-size: 1.8rem; font-weight: 700; border: none; border-radius: 15px; color: white; min-width: 150px; }
        #start-btn { background-color: #00D166; }
        #up-btn { background-color: #1E90FF; }
        #reset-btn { background-color: #FF4B2B; }
        button:active { transform: scale(0.9); }
    </style>
</head>
<body>

    <a href="index.html" class="home-link">ğŸ </a>

    <div id="clock">00:00:00</div>
    <div id="display">00:00:00</div>

    <div class="adjust-container">
        <button class="adj-btn" onclick="addMinutes(1)">+1ë¶„</button>
        <button class="adj-btn" onclick="addMinutes(5)">+5ë¶„</button>
        <button class="adj-btn" onclick="addMinutes(10)">+10ë¶„</button>
        <button class="adj-btn" onclick="addMinutes(30)">+30ë¶„</button>
    </div>

    <div class="control-container">
        <button id="start-btn" class="ctrl-btn" onclick="toggleTimer()">ì¹´ìš´íŠ¸ ë‹¤ìš´</button>
        <button id="up-btn" class="ctrl-btn" onclick="startCountup()">ì¹´ìš´íŠ¸ ì—…</button>
        <button id="reset-btn" class="ctrl-btn" onclick="resetTimer()">ë¦¬ì…‹</button>
    </div>

    <audio id="beep-sound" src="beep.wav" loop></audio>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";

        // Firebase ì„¤ì • ìœ ì§€
        const firebaseConfig = {
            apiKey: "AIzaSyCr3TFLtacU-MvXz2d2FB6SUAa_tlPKE70",
            authDomain: "status-ef996.firebaseapp.com",
            databaseURL: "https://status-ef996-default-rtdb.firebaseio.com",
            projectId: "status-ef996",
            appId: "1:675167661957:web:eb862fad09696074285eec"
        };
        initializeApp(firebaseConfig);

        let secondsElapsed = 0;
        let running = false; 
        let mode = "CLOCK";
        let timerInterval = null;

        const displayEl = document.getElementById('display');
        const startBtn = document.getElementById('start-btn');
        const clockEl = document.getElementById('clock');
        const beepSound = document.getElementById('beep-sound');

        function updateClock() {
            const now = new Date();
            clockEl.textContent = now.toLocaleTimeString('ko-KR', { hour12: false });
        }
        setInterval(updateClock, 1000);
        updateClock();

        function formatTime(secs) {
            const h = Math.floor(secs / 3600).toString().padStart(2, '0');
            const m = Math.floor((secs % 3600) / 60).toString().padStart(2, '0');
            const s = (secs % 60).toString().padStart(2, '0');
            return `${h}:${m}:${s}`;
        }

        window.addMinutes = (mins) => {
            if (!running) {
                stopAlarm();
                mode = "COUNTDOWN";
                secondsElapsed += mins * 60;
                displayEl.textContent = formatTime(secondsElapsed);
                displayEl.style.color = "#FFD700";
            }
        };

        window.toggleTimer = () => {
            if (secondsElapsed > 0 || mode === "COUNTUP") {
                stopAlarm();
                running = !running;
                if (running) {
                    startBtn.textContent = "ì •ì§€";
                    startBtn.style.backgroundColor = "#FFA500";
                    timerInterval = setInterval(tick, 1000);
                } else {
                    pauseTimer();
                }
            }
        };

        window.startCountup = () => {
            resetTimer();
            mode = "COUNTUP";
            running = true;
            startBtn.textContent = "ì •ì§€";
            startBtn.style.backgroundColor = "#FFA500";
            timerInterval = setInterval(tick, 1000);
        };

        window.resetTimer = () => {
            clearInterval(timerInterval);
            stopAlarm();
            running = false;
            mode = "CLOCK";
            secondsElapsed = 0;
            displayEl.textContent = "00:00:00";
            displayEl.style.color = "white";
            startBtn.textContent = "ì¹´ìš´íŠ¸ ë‹¤ìš´";
            startBtn.style.backgroundColor = "#00D166";
        };

        function tick() {
            if (mode === "COUNTUP") {
                secondsElapsed++;
                displayEl.style.color = "#00D166";
            } else if (mode === "COUNTDOWN") {
                if (secondsElapsed > 0) {
                    secondsElapsed--;
                } else {
                    triggerAlarm();
                }
            }
            displayEl.textContent = formatTime(secondsElapsed);
        }

        function triggerAlarm() {
            clearInterval(timerInterval);
            running = false;
            displayEl.textContent = "TIME UP!";
            displayEl.classList.add('flashing');
            beepSound.play().catch(e => console.log("ì†Œë¦¬ ì¬ìƒ ì‹¤íŒ¨:", e));
            startBtn.textContent = "ì¹´ìš´íŠ¸ ë‹¤ìš´";
            startBtn.style.backgroundColor = "#00D166";
        }

        function stopAlarm() {
            displayEl.classList.remove('flashing');
            beepSound.pause();
            beepSound.currentTime = 0;
        }

        function pauseTimer() {
            clearInterval(timerInterval);
            startBtn.textContent = "ì¬ê°œ";
            startBtn.style.backgroundColor = "#00D166";
        }
    </script>
</body>
</html>
